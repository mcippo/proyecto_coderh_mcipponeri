library(dplyr)
library(readr)
library(utils)
library(tidyverse)
library(sf)
library(readxl)
library(dplyr)
library(openxlsx)
usuarios <- read.csv("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/transporte-y-obras-publicas/bicicletas-publicas/usuarios_ecobici_2024.csv", sep = ",")
url <- "https://cdn.buenosaires.gob.ar/datosabiertos/datasets/transporte-y-obras-publicas/bicicletas-publicas/recorridos-realizados-2024.zip"
download.file(url, destfile = "procesamientos_r/datos.zip", mode = "wb")
unzip("procesamientos_r/datos.zip", list = TRUE)
unzip("procesamientos_r/datos.zip", files = "badata_ecobici_recorridos_realizados_2024.csv", exdir = "bases")
recorridos <- read_csv("procesamientos_r/badata_ecobici_recorridos_realizados_2024.csv")
recorridos <- read_csv("procesamientos_r/badata_ecobici_recorridos_realizados_2024.csv")
unzip("procesamientos_r/datos.zip", files = "badata_ecobici_recorridos_realizados_2024.csv", exdir = "bases")
unzip("procesamientos_r/datos.zip", files = "badata_ecobici_recorridos_realizados_2024.csv", exdir = "bases")
unzip("procesamientos_r/datos.zip", files = "badata_ecobici_recorridos_realizados_2024.csv", exdir = "procesamientos_r")
recorridos <- read_csv("procesamientos_r/badata_ecobici_recorridos_realizados_2024.csv")
rm(url)
estaciones <- read.csv("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/transporte-y-obras-publicas/estaciones-bicicletas-publicas/nuevas-estaciones-bicicletas-publicas.csv")
View(estaciones)
listado_estaciones <- estaciones %>% select(id,latitud,longitud)
View(listado_estaciones)
barrios <- read_sf("https://cdn.buenosaires.gob.ar/datosabiertos/datasets/ministerio-de-educacion/barrios/barrios.geojson") %>%
rename(barrio=nombre)
puntos <- st_as_sf(listado_estaciones, coords = c("longitud", "latitud"), crs = 4326)
View(puntos)
puntos_con_barrios <- st_join(puntos, barrios[, c("barrio")], join = st_within) %>%
st_drop_geometry()
View(puntos_con_barrios)
estaciones_2 <-  estaciones %>%
select(-c(barrio,comuna,emplazamiento)) %>%
left_join(puntos_con_barrios)
chequeo <- estaciones_2 %>% filter(is.na(barrio))
View(chequeo)
estaciones_2 <- estaciones_2 %>%
mutate(barrio=case_when(nombre=="AEROPARQUE"~"Palermo",
nombre=="MACACHA GUEMES"~"Belgrano",
TRUE~barrio)) %>%
select(1:4,7,5,6) %>%
arrange(id)
View(estaciones_2)
